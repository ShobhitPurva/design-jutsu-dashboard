<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Jutsu ‚Äî Command Center</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0a0a0a;
            --bg-secondary: #141414;
            --bg-tertiary: #1a1a1a;
            --bg-card: #1e1e1e;
            --crimson: #A31621;
            --crimson-dark: #8B0000;
            --text-primary: #f0e6e6;
            --text-secondary: #999999;
            --text-tertiary: #666666;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --border: #2a2424;
            --spacing: 16px;
        }

        body {
            font-family: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--bg-primary);
            background-image: 
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,.02) 2px, rgba(255,255,255,.02) 4px),
                repeating-linear-gradient(90deg, transparent, transparent 2px, rgba(255,255,255,.02) 2px, rgba(255,255,255,.02) 4px);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
            font-size: 15px;
        }

        /* Password Gate */
        .password-gate {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: var(--spacing);
        }

        .password-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: calc(var(--spacing) * 3) calc(var(--spacing) * 2);
            max-width: 400px;
            width: 100%;
            text-align: center;
        }

        .password-title {
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: calc(var(--spacing) / 2);
            color: var(--crimson);
        }

        .password-subtitle {
            color: var(--text-secondary);
            margin-bottom: calc(var(--spacing) * 2);
            font-size: 0.9375rem;
        }

        .password-input {
            width: 100%;
            padding: 14px var(--spacing);
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 1rem;
            margin-bottom: var(--spacing);
            transition: border-color 0.2s;
            min-height: 44px;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--crimson);
        }

        .password-submit {
            width: 100%;
            padding: 14px;
            background: var(--crimson);
            border: none;
            border-radius: 6px;
            color: #ffffff;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s;
            min-height: 44px;
        }

        .password-submit:hover {
            background: var(--crimson-dark);
        }

        .password-error {
            color: var(--error);
            font-size: 0.875rem;
            margin-top: calc(var(--spacing) / 2);
            display: none;
        }

        .password-error.show {
            display: block;
        }

        /* Dashboard */
        .dashboard {
            display: none;
            min-height: 100vh;
        }

        .dashboard.unlocked {
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border);
            padding: calc(var(--spacing) * 1.25) calc(var(--spacing) * 2);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--crimson);
        }

        /* Main Container */
        .container {
            flex: 1;
            max-width: 1400px;
            margin: 0 auto;
            padding: calc(var(--spacing) * 2);
            width: 100%;
        }

        /* Section */
        .section {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 8px;
            margin-bottom: calc(var(--spacing) * 2);
        }

        .section-header {
            padding: calc(var(--spacing) * 1.25) calc(var(--spacing) * 1.5);
            border-bottom: 1px solid var(--border);
        }

        .section-title {
            font-size: 1rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--crimson);
        }

        .section-body {
            padding: calc(var(--spacing) * 1.5);
        }

        /* Content Queue Cards */
        .queue-cards {
            display: flex;
            flex-direction: column;
            gap: var(--spacing);
        }

        .queue-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: var(--spacing);
            transition: border-color 0.2s;
        }

        .queue-card.expanded {
            border-color: var(--crimson);
        }

        .queue-card-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: var(--spacing);
            cursor: pointer;
            padding: calc(var(--spacing) / 2);
            margin: calc(var(--spacing) / -2);
            border-radius: 6px;
            transition: background 0.2s;
        }

        .queue-card-header:hover {
            background: var(--bg-tertiary);
        }

        .queue-card-left {
            flex: 1;
        }

        .queue-card-id {
            font-size: 0.75rem;
            color: var(--text-tertiary);
            font-weight: 600;
            margin-bottom: 4px;
        }

        .queue-card-title {
            font-weight: 600;
            font-size: 1.125rem;
            line-height: 1.4;
            color: var(--text-primary);
            margin-bottom: 8px;
        }

        .queue-card-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .type-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            padding: 4px 10px;
            background: var(--bg-tertiary);
            border-radius: 4px;
            font-size: 0.8125rem;
            font-weight: 500;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 0.8125rem;
            font-weight: 600;
            color: #ffffff;
        }

        .status-draft { background: var(--warning); }
        .status-posted { background: var(--success); }

        .queue-card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
            padding: 0;
        }

        .queue-card.expanded .queue-card-content {
            max-height: 3000px;
            padding-top: var(--spacing);
            border-top: 1px solid var(--border);
            margin-top: var(--spacing);
        }

        .queue-preview {
            font-size: 0.9375rem;
            line-height: 1.6;
            color: var(--text-primary);
            white-space: pre-wrap;
            word-wrap: break-word;
            margin-bottom: var(--spacing);
        }

        /* Action Buttons */
        .queue-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 8px;
            margin-top: var(--spacing);
        }

        .action-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            padding: 12px 16px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            font-family: inherit;
            min-height: 44px;
            white-space: nowrap;
        }

        .action-btn:hover {
            background: var(--bg-card);
            border-color: var(--crimson);
            transform: translateY(-1px);
        }

        .action-btn.approve {
            background: var(--success);
            border-color: var(--success);
            color: #ffffff;
        }

        .action-btn.approve:hover {
            background: #0d9668;
        }

        .action-btn.reject {
            background: var(--error);
            border-color: var(--error);
            color: #ffffff;
        }

        .action-btn.reject:hover {
            background: #dc2626;
        }

        .action-btn.suggest {
            background: var(--warning);
            border-color: var(--warning);
            color: #ffffff;
        }

        .action-btn.suggest:hover {
            background: #d97706;
        }

        /* Edit/Suggest Editor */
        .edit-editor {
            display: none;
            margin-top: var(--spacing);
            padding: var(--spacing);
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
        }

        .edit-editor.show {
            display: block;
        }

        .edit-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .edit-textarea {
            width: 100%;
            padding: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: inherit;
            font-size: 0.9375rem;
            resize: vertical;
            min-height: 100px;
            margin-bottom: 8px;
            transition: border-color 0.2s;
        }

        .edit-textarea:focus {
            outline: none;
            border-color: var(--crimson);
        }

        .edit-buttons {
            display: flex;
            gap: 8px;
        }

        .edit-btn {
            flex: 1;
            padding: 10px;
            background: var(--crimson);
            border: 1px solid var(--crimson);
            border-radius: 6px;
            color: #ffffff;
            font-family: inherit;
            font-size: 0.875rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 40px;
        }

        .edit-btn:hover {
            background: var(--crimson-dark);
        }

        .edit-btn.cancel {
            background: var(--bg-tertiary);
            border-color: var(--border);
            color: var(--text-primary);
        }

        .edit-btn.cancel:hover {
            background: var(--bg-card);
        }

        /* Fallback Copy Box */
        .copy-fallback {
            display: none;
            margin-top: 8px;
            padding: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 6px;
        }

        .copy-fallback.show {
            display: block;
        }

        .copy-fallback-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-bottom: 6px;
            font-weight: 600;
        }

        .copy-fallback-text {
            width: 100%;
            padding: 8px;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 4px;
            color: var(--text-primary);
            font-family: monospace;
            font-size: 0.875rem;
            user-select: all;
        }

        /* Toast */
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--success);
            color: #ffffff;
            padding: 14px 18px;
            border-radius: 8px;
            font-size: 0.875rem;
            font-weight: 500;
            z-index: 999;
            display: none;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
            animation: slideInRight 0.3s ease-out;
            max-width: 350px;
        }

        .toast.show {
            display: block;
        }

        .toast.error {
            background: var(--error);
        }

        .toast.warning {
            background: var(--warning);
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: calc(var(--spacing) * 4);
            color: var(--text-tertiary);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: var(--spacing);
            opacity: 0.3;
        }

        /* Footer */
        .footer {
            border-top: 1px solid var(--border);
            padding: calc(var(--spacing) * 2);
            color: var(--text-tertiary);
            font-size: 0.8125rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: var(--spacing);
            }

            .container {
                padding: var(--spacing);
            }

            .queue-actions {
                grid-template-columns: 1fr;
            }

            .toast {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }
    </style>
</head>
<body>
    <script>
        const DASHBOARD_DATA = {
            lastUpdated: "2026-02-12T21:54:00.000Z",
            contentQueue: []
        };
    </script>

    <!-- Password Gate -->
    <div class="password-gate" id="passwordGate">
        <div class="password-box">
            <h1 class="password-title">Design Jutsu</h1>
            <p class="password-subtitle">Command Center</p>
            <input type="password" class="password-input" id="passwordInput" placeholder="Enter password" autocomplete="off">
            <button class="password-submit" onclick="checkPassword()">Unlock</button>
            <p class="password-error" id="passwordError">Incorrect password</p>
        </div>
    </div>

    <!-- Dashboard -->
    <div class="dashboard" id="dashboard">
        <header class="header">
            <div class="header-title">Design Jutsu ‚Äî Command Center</div>
        </header>

        <div class="container">
            <section class="section">
                <div class="section-header">
                    <h2 class="section-title">Content Queue</h2>
                </div>
                <div class="section-body">
                    <div class="queue-cards" id="contentQueue"></div>
                </div>
            </section>
        </div>

        <footer class="footer">
            Powered by OpenClaw
        </footer>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <script>
        let expandedCard = null;
        let activeEditor = null;

        // Password check
        function checkPassword() {
            const input = document.getElementById('passwordInput');
            const error = document.getElementById('passwordError');
            
            if (input.value === 'grandmaster') {
                sessionStorage.setItem('djAuth', 'true');
                document.getElementById('passwordGate').style.display = 'none';
                document.getElementById('dashboard').classList.add('unlocked');
                renderDashboard();
            } else {
                error.classList.add('show');
                input.value = '';
                setTimeout(() => error.classList.remove('show'), 3000);
            }
        }

        document.getElementById('passwordInput')?.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkPassword();
        });

        if (sessionStorage.getItem('djAuth') === 'true') {
            document.getElementById('passwordGate').style.display = 'none';
            document.getElementById('dashboard').classList.add('unlocked');
            renderDashboard();
        }

        // Toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.className = 'toast show ' + type;
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Clipboard copy with fallback
        async function copyToClipboard(text, id, type) {
            try {
                await navigator.clipboard.writeText(text);
                let toastType = 'success';
                if (type === 'reject' || type === 'delete') toastType = 'error';
                if (type === 'edit' || type === 'suggest') toastType = 'warning';
                showToast(`Copied: ${text} ‚Äî paste in Discord`, toastType);
            } catch (err) {
                // Clipboard API failed, show fallback
                showFallback(text, id);
                showToast('Copy failed ‚Äî use text box below', 'warning');
            }
        }

        function showFallback(text, id) {
            const fallback = document.getElementById(`fallback-${id}`);
            if (fallback) {
                fallback.classList.add('show');
                fallback.querySelector('.copy-fallback-text').value = text;
                fallback.querySelector('.copy-fallback-text').select();
            }
        }

        // Action handlers
        function handleApprove(id) {
            const command = `approve ${id}`;
            copyToClipboard(command, id, 'approve');
        }

        function handleReject(id) {
            const command = `reject ${id}`;
            copyToClipboard(command, id, 'reject');
        }

        function handleDelete(id) {
            const command = `reject ${id}: delete this`;
            copyToClipboard(command, id, 'delete');
        }

        function toggleEditor(id, type) {
            const editor = document.getElementById(`editor-${id}-${type}`);
            if (!editor) return;

            if (activeEditor === `${id}-${type}`) {
                editor.classList.remove('show');
                activeEditor = null;
            } else {
                if (activeEditor) {
                    const [prevId, prevType] = activeEditor.split('-');
                    document.getElementById(`editor-${prevId}-${prevType}`)?.classList.remove('show');
                }
                editor.classList.add('show');
                editor.querySelector('textarea').focus();
                activeEditor = `${id}-${type}`;
            }
        }

        function saveEdit(id, type) {
            const textarea = document.querySelector(`#editor-${id}-${type} textarea`);
            const content = textarea.value.trim();

            if (!content) {
                showToast('Please enter some text', 'warning');
                return;
            }

            const command = type === 'edit' 
                ? `edit ${id}: ${content}`
                : `recommend ${id}: ${content}`;

            copyToClipboard(command, id, type);
            
            // Close editor after short delay
            setTimeout(() => {
                document.getElementById(`editor-${id}-${type}`).classList.remove('show');
                activeEditor = null;
                textarea.value = '';
            }, 500);
        }

        function cancelEdit(id, type) {
            document.getElementById(`editor-${id}-${type}`).classList.remove('show');
            activeEditor = null;
        }

        function toggleCard(id) {
            const card = document.getElementById(`card-${id}`);
            
            if (expandedCard === id) {
                card.classList.remove('expanded');
                expandedCard = null;
            } else {
                if (expandedCard) {
                    document.getElementById(`card-${expandedCard}`)?.classList.remove('expanded');
                }
                card.classList.add('expanded');
                expandedCard = id;
            }
        }

        function getTypeIcon(type) {
            const icons = {
                bounty: 'üéØ',
                resource: 'üîß',
                discussion: 'üí¨',
                announcement: 'üì¢'
            };
            return icons[type.toLowerCase()] || 'üìÑ';
        }

        function renderDashboard() {
            const container = document.getElementById('contentQueue');
            
            if (DASHBOARD_DATA.contentQueue.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">üìã</div>
                        <div>No content in queue</div>
                    </div>
                `;
                return;
            }

            let html = '';
            DASHBOARD_DATA.contentQueue.forEach(item => {
                html += `
                    <div class="queue-card ${expandedCard === item.id ? 'expanded' : ''}" id="card-${item.id}">
                        <div class="queue-card-header" onclick="toggleCard(${item.id})">
                            <div class="queue-card-left">
                                <div class="queue-card-id">#${item.id}</div>
                                <div class="queue-card-title">${item.title}</div>
                                <div class="queue-card-meta">
                                    <span class="type-badge">${getTypeIcon(item.type)} ${item.type}</span>
                                    <span>${item.channel}</span>
                                    <span>${item.date}</span>
                                </div>
                            </div>
                            <span class="status-badge status-${item.status}">${item.status.charAt(0).toUpperCase() + item.status.slice(1)}</span>
                        </div>
                        
                        <div class="queue-card-content">
                            <div class="queue-preview">${item.preview}</div>
                            
                            <div class="queue-actions">
                                <button class="action-btn approve" onclick="handleApprove(${item.id})">
                                    ‚úÖ Approve
                                </button>
                                <button class="action-btn reject" onclick="handleReject(${item.id})">
                                    ‚ùå Reject
                                </button>
                                <button class="action-btn" onclick="toggleEditor(${item.id}, 'edit')">
                                    ‚úèÔ∏è Edit
                                </button>
                                <button class="action-btn suggest" onclick="toggleEditor(${item.id}, 'suggest')">
                                    üí¨ Suggest
                                </button>
                                <button class="action-btn" onclick="handleDelete(${item.id})">
                                    üóëÔ∏è Delete
                                </button>
                            </div>

                            <div class="copy-fallback" id="fallback-${item.id}">
                                <div class="copy-fallback-label">Copy this command:</div>
                                <input type="text" class="copy-fallback-text" readonly>
                            </div>

                            <div class="edit-editor" id="editor-${item.id}-edit">
                                <div class="edit-label">Enter your edit instructions:</div>
                                <textarea class="edit-textarea" placeholder="Type what changes you want..."></textarea>
                                <div class="edit-buttons">
                                    <button class="edit-btn cancel" onclick="cancelEdit(${item.id}, 'edit')">Cancel</button>
                                    <button class="edit-btn" onclick="saveEdit(${item.id}, 'edit')">Copy Edit Command</button>
                                </div>
                            </div>

                            <div class="edit-editor" id="editor-${item.id}-suggest">
                                <div class="edit-label">Enter your suggestion:</div>
                                <textarea class="edit-textarea" placeholder="Type your recommendation..."></textarea>
                                <div class="edit-buttons">
                                    <button class="edit-btn cancel" onclick="cancelEdit(${item.id}, 'suggest')">Cancel</button>
                                    <button class="edit-btn" onclick="saveEdit(${item.id}, 'suggest')">Copy Suggest Command</button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            container.innerHTML = html;
        }

        if (sessionStorage.getItem('djAuth') === 'true') {
            renderDashboard();
        }
    </script>
</body>
</html>
